<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero de Indicadores Estrat√©gicos: Bolivia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Chart Container Styling - Mandatory per instructions */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; /* Adapts to grid/modal width */
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }

        /* Animations */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .modal-enter { animation: modalSlideIn 0.3s ease-out forwards; }
        @keyframes modalSlideIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
    <!-- Chosen Palette: Warm Professional (Slate, Teal, Earthy Accents) -->
    <!-- Application Structure Plan: 
         1. Hero Section: Introduction and context setting.
         2. Interactive Sidebar/Nav: Grouped by 'Ejes' (Axes) to allow focused exploration of specific strategic areas.
         3. Main Dashboard Area: Displays cards for each indicator within the selected Axis. Each card offers a snapshot.
         4. Detailed Modal/Overlay: The core 'Complete' action. Clicking a card opens a detailed view containing the generated Baseline, Formulas, Justifications, and a Chart.js visualization of the trend/status.
         5. Logic: Vanilla JS handles data injection, state management (active axis, active modal), and Chart lifecycle.
    -->
    <!-- Visualization & Content Choices:
         1. Goal: Inform -> Technical Cards -> Display Indicator Name, Definition summary.
         2. Goal: Educate -> Modal Detail -> Shows 'Formula', 'Elements', 'Justification' as requested.
         3. Goal: Change/Trend -> Line/Bar Charts (Chart.js) -> Visualizes the hypothetical progress from Baseline to Target.
         4. Interaction -> Filter by Axis, Click for Details -> Keeps the interface clean while allowing deep diving.
         5. CONFIRMATION: NO SVG graphics used (using Unicode icons). NO Mermaid JS used.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="text-slate-800 bg-slate-50 min-h-screen flex flex-col">

    <!-- Header / Context -->
    <header class="bg-white shadow-sm border-b border-slate-200 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                <div>
                    <h1 class="text-2xl font-bold text-slate-900 tracking-tight">
                        <span class="text-teal-600">Bolivia:</span> Monitor de Planificaci√≥n Estrat√©gica
                    </h1>
                    <p class="mt-1 text-sm text-slate-500 max-w-2xl">
                        Herramienta interactiva para el an√°lisis de los 7 Ejes Estrat√©gicos. 
                        Explore definiciones t√©cnicas, f√≥rmulas de c√°lculo, l√≠neas base y proyecciones de impacto.
                    </p>
                </div>
                <div class="mt-4 md:mt-0 flex gap-2">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        Estado: Activo
                    </span>
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                        25 Indicadores
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8 flex flex-col md:flex-row gap-8">
        
        <!-- Sidebar Navigation (Axes) -->
        <nav class="md:w-64 flex-shrink-0 space-y-2" aria-label="Navegaci√≥n por Ejes">
            <h3 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-4 px-2">Ejes Estrat√©gicos</h3>
            <div id="axis-nav-container" class="space-y-1">
                <!-- Nav items injected by JS -->
            </div>
            
            <div class="mt-8 bg-slate-100 p-4 rounded-lg border border-slate-200">
                <h4 class="text-sm font-semibold text-slate-700 mb-2">Resumen Global</h4>
                <div class="flex justify-between items-center text-xs text-slate-600 mb-1">
                    <span>Progreso Total</span>
                    <span class="font-bold">68%</span>
                </div>
                <div class="w-full bg-slate-200 rounded-full h-2">
                    <div class="bg-teal-600 h-2 rounded-full" style="width: 68%"></div>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-1 min-w-0">
            
            <!-- Intro Block for the Active Section -->
            <div id="section-header" class="mb-8 fade-in">
                <!-- Injected by JS -->
            </div>

            <!-- Indicators Grid -->
            <div id="indicators-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                <!-- Cards injected by JS -->
            </div>
        </main>
    </div>

    <!-- Modal Overlay -->
    <div id="detail-modal" class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col modal-enter relative">
            
            <!-- Modal Header -->
            <div class="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                <div>
                    <span id="modal-axis-badge" class="text-xs font-bold tracking-wide uppercase text-teal-600 mb-1 block"></span>
                    <h2 id="modal-title" class="text-xl font-bold text-slate-800 leading-tight"></h2>
                </div>
                <button id="close-modal" class="text-slate-400 hover:text-slate-600 transition-colors p-2 rounded-lg hover:bg-slate-200">
                    <span class="text-2xl">&times;</span>
                </button>
            </div>

            <!-- Modal Body (Scrollable) -->
            <div class="overflow-y-auto p-6 flex-1">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    <!-- Left Column: Technical Details -->
                    <div class="lg:col-span-2 space-y-6">
                        
                        <!-- Justification -->
                        <section>
                            <h3 class="text-sm font-bold text-slate-900 uppercase tracking-wider mb-2 border-l-4 border-teal-500 pl-3">
                                Contexto y Justificaci√≥n
                            </h3>
                            <p id="modal-justification" class="text-slate-600 text-sm leading-relaxed text-justify"></p>
                        </section>

                        <!-- Methodology Box -->
                        <section class="bg-slate-50 rounded-lg p-5 border border-slate-200">
                            <h3 class="text-sm font-bold text-slate-800 mb-3 flex items-center gap-2">
                                <span>‚öôÔ∏è</span> Ficha T√©cnica
                            </h3>
                            <div class="grid grid-cols-1 gap-4">
                                <div>
                                    <span class="text-xs text-slate-500 font-semibold block mb-1">F√ìRMULA DE C√ÅLCULO</span>
                                    <code id="modal-formula" class="block bg-white border border-slate-300 rounded p-2 text-xs font-mono text-slate-700"></code>
                                </div>
                                <div>
                                    <span class="text-xs text-slate-500 font-semibold block mb-1">ELEMENTOS DEL INDICADOR</span>
                                    <p id="modal-elements" class="text-sm text-slate-700"></p>
                                </div>
                                <div>
                                    <span class="text-xs text-slate-500 font-semibold block mb-1">M√âTODO DE RECOLECCI√ìN</span>
                                    <p id="modal-calc-method" class="text-sm text-slate-700"></p>
                                </div>
                            </div>
                        </section>

                    </div>

                    <!-- Right Column: Stats & Chart -->
                    <div class="lg:col-span-1 flex flex-col gap-6">
                        
                        <!-- Key Metrics Box -->
                        <div class="bg-teal-50 rounded-lg p-4 border border-teal-100">
                            <div class="mb-4">
                                <span class="text-xs text-teal-600 font-bold uppercase">L√≠nea Base (A√±o Ref.)</span>
                                <div id="modal-baseline" class="text-2xl font-bold text-teal-800"></div>
                            </div>
                            <div>
                                <span class="text-xs text-teal-600 font-bold uppercase">Resultado Actual</span>
                                <div id="modal-result" class="text-2xl font-bold text-teal-900"></div>
                            </div>
                            <div class="mt-2 text-xs text-teal-700 flex items-center gap-1">
                                <span class="text-lg">üìà</span> Tendencia Proyectada
                            </div>
                        </div>

                        <!-- Chart Area -->
                        <div class="flex-1 flex flex-col">
                            <h4 class="text-xs font-semibold text-slate-500 mb-2 uppercase text-center">Evoluci√≥n Hist√≥rica / Meta</h4>
                            <div class="chart-container bg-white rounded-lg border border-slate-100 shadow-sm p-2 flex-grow">
                                <canvas id="detailChart"></canvas>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="px-6 py-3 bg-slate-50 border-t border-slate-200 text-right">
                <button class="text-xs text-slate-500 hover:text-teal-600 underline">Descargar Ficha T√©cnica (.pdf)</button>
            </div>
        </div>
    </div>

    <script>
        // --- Data Structure: Enriched with generated educational content ---
        const axesData = {
            1: { name: "Econom√≠a para la gente", desc: "Enfoque en la generaci√≥n de empleo digno, estabilidad macroecon√≥mica e industrializaci√≥n con sustituci√≥n de importaciones." },
            2: { name: "Bolivia al mundo", desc: "Estrategias para la inserci√≥n internacional, promoci√≥n de exportaciones con valor agregado y atracci√≥n de inversiones inteligentes." },
            3: { name: "Bolivia 50/50", desc: "Impulso a la equidad en la distribuci√≥n de recursos y competencias, fortaleciendo la descentralizaci√≥n fiscal y administrativa." },
            4: { name: "Bolivia moderna", desc: "Transformaci√≥n digital del Estado para reducir la burocracia, aumentar la eficiencia y mejorar la experiencia ciudadana." },
            5: { name: "Bolivia transparente", desc: "Mecanismos de control social, datos abiertos y trazabilidad en las compras p√∫blicas para combatir la corrupci√≥n." },
            6: { name: "Bienestar para todos", desc: "Garant√≠a de derechos fundamentales: salud de calidad, educaci√≥n pertinente y acceso a servicios b√°sicos." },
            7: { name: "Bolivia verde", desc: "Desarrollo sostenible que equilibra la producci√≥n con la conservaci√≥n ambiental y la adaptaci√≥n al cambio clim√°tico." }
        };

        const indicatorsData = [
            // Eje 1
            {
                id: 1, eje: 1, name: "Tasa de empleo adecuado",
                baseline: "28.5%", result: "42.1%", type: "line",
                formula: "(Poblaci√≥n con empleo adecuado / Poblaci√≥n Econ√≥micamente Activa) * 100",
                elements: "Empleo adecuado: Personas que trabajan 40+ horas o perciben ingresos sobre el m√≠nimo legal.",
                method: "Encuesta Continua de Empleo (ECE) - Trimestral.",
                justification: "Este indicador es fundamental para medir la calidad del mercado laboral, m√°s all√° de la simple ocupaci√≥n. Un aumento refleja una mejora real en las condiciones de vida de las familias bolivianas.",
                dataPoints: [28.5, 30.2, 33.5, 38.0, 42.1]
            },
            {
                id: 2, eje: 1, name: "Inversi√≥n total % PBI",
                baseline: "14.2%", result: "18.5%", type: "bar",
                formula: "(Formaci√≥n Bruta de Capital Fijo P√∫blica + Privada) / PIB * 100",
                elements: "FBKF P√∫blica, FBKF Privada, PIB Nominal.",
                method: "Cuentas Nacionales - Anual.",
                justification: "La inversi√≥n es el motor del crecimiento futuro. Este indicador monitorea el esfuerzo conjunto del estado y el sector privado para expandir la capacidad productiva del pa√≠s.",
                dataPoints: [14.2, 15.0, 15.8, 17.2, 18.5]
            },
            {
                id: 3, eje: 1, name: "Recaudaci√≥n no extractiva % PBI",
                baseline: "18.0%", result: "21.3%", type: "line",
                formula: "(Recaudaci√≥n Total - IDH - IEHD) / PIB * 100",
                elements: "Impuestos de Mercado Interno, Impuestos Aduaneros, PIB.",
                method: "Registros Administrativos de Impuestos Nacionales.",
                justification: "Busca reducir la dependencia de los recursos naturales (hidrocarburos/miner√≠a). Un aumento indica una econom√≠a m√°s diversificada y fiscalmente sostenible.",
                dataPoints: [18.0, 18.5, 19.2, 20.1, 21.3]
            },
            {
                id: 4, eje: 1, name: "Ingreso laboral real promedio",
                baseline: "Bs. 2,100", result: "Bs. 2,450", type: "line",
                formula: "Sumatoria(Ingresos laborales deflactados) / Total de ocupados",
                elements: "Ingresos nominales, √çndice de Precios al Consumidor (IPC).",
                method: "Encuesta de Hogares - Anual.",
                justification: "Refleja el poder adquisitivo real de los trabajadores. Es un proxy directo del bienestar econ√≥mico de los hogares.",
                dataPoints: [2100, 2150, 2220, 2350, 2450]
            },
            // Eje 2
            {
                id: 5, eje: 2, name: "Ingresos por turismo internacional",
                baseline: "$450M", result: "$620M", type: "bar",
                formula: "Gasto promedio por turista * N√∫mero de llegadas internacionales",
                elements: "Encuesta de Gasto de Turismo Receptor.",
                method: "Balanza de Pagos - Trimestral.",
                justification: "El turismo es una exportaci√≥n de servicios clave. Este indicador mide el √©xito de la marca pa√≠s y la competitividad de los destinos tur√≠sticos bolivianos.",
                dataPoints: [450, 480, 520, 580, 620]
            },
            {
                id: 6, eje: 2, name: "Exportaciones no tradicionales",
                baseline: "$1.2B", result: "$2.1B", type: "line",
                formula: "Valor FOB Exportaciones (Agroindustria + Manufactura + Forestal)",
                elements: "Declaraciones √önicas de Exportaci√≥n (DUE).",
                method: "Estad√≠sticas de Comercio Exterior (INE).",
                justification: "Esencial para diversificar la canasta exportadora y reducir la vulnerabilidad ante shocks de precios de materias primas.",
                dataPoints: [1.2, 1.4, 1.6, 1.9, 2.1]
            },
            {
                id: 7, eje: 2, name: "Incremento exportaciones mineras",
                baseline: "$3.5B", result: "$4.8B", type: "line",
                formula: "Valor FOB Exportaciones Minerales a√±o t - a√±o t-1",
                elements: "Volumen exportado, Cotizaci√≥n internacional.",
                method: "Estad√≠sticas de Comercio Exterior.",
                justification: "Aunque extractivo, el sector minero es vital para la balanza comercial. Se busca maximizar el valor capturado en ciclos de precios altos.",
                dataPoints: [3.5, 3.8, 4.2, 4.5, 4.8]
            },
            {
                id: 8, eje: 2, name: "Inversi√≥n Extranjera Directa (IED)",
                baseline: "$300M", result: "$750M", type: "bar",
                formula: "Aportes de capital + Reinversi√≥n de utilidades + Deuda con casa matriz",
                elements: "Flujos netos de capital extranjero.",
                method: "Balanza de Pagos (BCB).",
                justification: "La IED aporta no solo capital, sino transferencia tecnol√≥gica y acceso a nuevos mercados.",
                dataPoints: [300, 420, 510, 600, 750]
            },
            // Eje 3
            {
                id: 9, eje: 3, name: "Participaci√≥n gasto subnacional",
                baseline: "35%", result: "45%", type: "pie", // Rendered as donut in chart.js
                formula: "(Gasto Gob. Aut√≥nomos Departamentales + Municipales) / Gasto P√∫blico Consolidado",
                elements: "Ejecuci√≥n presupuestaria por nivel institucional.",
                method: "Sistema de Gesti√≥n P√∫blica (SIGEP).",
                justification: "Mide el grado real de descentralizaci√≥n fiscal. Un mayor porcentaje implica que las decisiones de gasto est√°n m√°s cerca del ciudadano.",
                dataPoints: [35, 38, 40, 42, 45]
            },
            {
                id: 10, eje: 3, name: "Gasto subnacional % PIB",
                baseline: "12%", result: "15%", type: "line",
                formula: "Gasto Ejecutado Subnacional / PIB Nominal * 100",
                elements: "Presupuesto devengado GADs y GAMs.",
                method: "Reportes fiscales del Ministerio de Econom√≠a.",
                justification: "Indica el peso econ√≥mico de los gobiernos locales en la econom√≠a nacional.",
                dataPoints: [12, 12.5, 13.5, 14.2, 15]
            },
            {
                id: 11, eje: 3, name: "Brecha de ejecuci√≥n subnacional",
                baseline: "25%", result: "10%", type: "bar",
                formula: "Desviaci√≥n est√°ndar de % ejecuci√≥n entre municipios tipo A, B, C",
                elements: "Porcentajes de ejecuci√≥n presupuestaria anual.",
                method: "An√°lisis comparativo SIGEP.",
                justification: "Busca reducir la asimetr√≠a en la capacidad de gesti√≥n. Una brecha menor significa que tanto municipios grandes como peque√±os logran invertir sus recursos.",
                dataPoints: [25, 20, 18, 14, 10]
            },
            // Eje 4
            {
                id: 12, eje: 4, name: "Tiempo resoluci√≥n de tr√°mites",
                baseline: "15 d√≠as", result: "4 d√≠as", type: "line",
                formula: "Promedio(Fecha Fin - Fecha Inicio) de tr√°mites priorizados",
                elements: "Registros de logs de sistemas de gesti√≥n documental.",
                method: "Auditor√≠a de servicios y encuestas de satisfacci√≥n.",
                justification: "Indicador directo de eficiencia burocr√°tica. Reducir tiempos libera horas productivas para ciudadanos y empresas.",
                dataPoints: [15, 12, 9, 6, 4]
            },
            {
                id: 13, eje: 4, name: "Tr√°mites 100% en l√≠nea",
                baseline: "5%", result: "60%", type: "bar",
                formula: "(Nro Tr√°mites digitales end-to-end / Total Tr√°mites Priorizados) * 100",
                elements: "Cat√°logo de tr√°mites del estado.",
                method: "Monitoreo de Gobierno Electr√≥nico (AGETIC).",
                justification: "La digitalizaci√≥n total elimina la necesidad de presencia f√≠sica, reduciendo costos de transacci√≥n y focos de corrupci√≥n.",
                dataPoints: [5, 20, 35, 48, 60]
            },
            {
                id: 14, eje: 4, name: "Reutilizaci√≥n de datos (Interoperabilidad)",
                baseline: "0%", result: "45%", type: "bar",
                formula: "Porcentaje de campos de formulario pre-llenados v√≠a interoperabilidad",
                elements: "Conexiones a Plataforma de Interoperabilidad.",
                method: "Reportes t√©cnicos de sistemas integrados.",
                justification: "Aplica el principio de 'Only Once': el ciudadano no debe entregar al Estado un dato que el Estado ya posee.",
                dataPoints: [0, 10, 25, 35, 45]
            },
            // Eje 5
            {
                id: 15, eje: 5, name: "Compras con trazabilidad digital",
                baseline: "10%", result: "85%", type: "line",
                formula: "(Monto adjudicado con trazabilidad Blockchain o similar / Monto total) * 100",
                elements: "Sistemas de Contrataciones Estatales (SICOES).",
                method: "Auditor√≠a forense de datos.",
                justification: "La trazabilidad total permite seguir cada centavo desde la licitaci√≥n hasta el pago, disuadiendo pr√°cticas il√≠citas.",
                dataPoints: [10, 30, 50, 70, 85]
            },
            {
                id: 16, eje: 5, name: "Contratos p√∫blicos en l√≠nea",
                baseline: "60%", result: "100%", type: "bar",
                formula: "Procesos publicados en Open Data / Total Procesos",
                elements: "Portal de Datos Abiertos.",
                method: "Verificaci√≥n autom√°tica de publicaciones.",
                justification: "La transparencia pasiva no basta; la informaci√≥n debe estar disponible en formatos abiertos y procesables.",
                dataPoints: [60, 75, 85, 95, 100]
            },
            {
                id: 17, eje: 5, name: "Adjudicaci√≥n directa / √önico postor",
                baseline: "40%", result: "15%", type: "line",
                formula: "(Monto contrataciones directas + Excepciones) / Monto Total",
                elements: "Modalidades de contrataci√≥n.",
                method: "An√°lisis de SICOES.",
                justification: "Un alto porcentaje de contrataciones directas es una 'red flag' de corrupci√≥n. Se busca maximizar la licitaci√≥n p√∫blica competitiva.",
                dataPoints: [40, 35, 28, 20, 15]
            },
            // Eje 6
            {
                id: 19, eje: 6, name: "Disponibilidad medicamentos esenciales",
                baseline: "65%", result: "92%", type: "line",
                formula: "Porcentaje promedio de disponibilidad de lista LINAME en farmacias p√∫blicas",
                elements: "Inventarios de establecimientos de salud.",
                method: "Muestreo mensual en establecimientos de 1er, 2do y 3er nivel.",
                justification: "Garantiza el derecho a la salud. El acceso a la atenci√≥n m√©dica es in√∫til sin los insumos para el tratamiento.",
                dataPoints: [65, 72, 80, 88, 92]
            },
            {
                id: 20, eje: 6, name: "Sistemas de citas/turnos digitales",
                baseline: "15%", result: "70%", type: "bar",
                formula: "Establecimientos con sistema electr√≥nico de filas / Total Establecimientos",
                elements: "Hospitales y Centros de Salud.",
                method: "Registro de modernizaci√≥n en salud.",
                justification: "Reduce las 'colas de madrugada' y dignifica el trato al paciente, optimizando el flujo de atenci√≥n.",
                dataPoints: [15, 30, 45, 60, 70]
            },
            {
                id: 21, eje: 6, name: "Logro en lectura y matem√°tica",
                baseline: "40%", result: "55%", type: "line",
                formula: "Estudiantes con nivel Satisfactorio o Avanzado en pruebas estandarizadas",
                elements: "Pruebas de calidad educativa (similares a PISA/LLECE).",
                method: "Evaluaci√≥n anual censal o muestral.",
                justification: "Mide la calidad real del sistema educativo, m√°s all√° de la cobertura o matr√≠cula. Es predictor de capital humano futuro.",
                dataPoints: [40, 43, 47, 51, 55]
            },
            // Eje 7
            {
                id: 22, eje: 7, name: "Tiempo respuesta emergencias amb.",
                baseline: "48 hrs", result: "12 hrs", type: "line",
                formula: "Tiempo promedio entre alerta y llegada de equipo de primera respuesta",
                elements: "Incendios forestales, derrames, inundaciones.",
                method: "Bit√°coras de Defensa Civil y Ministerio de Medio Ambiente.",
                justification: "En desastres ambientales, la velocidad es crucial para contener da√±os irreversibles a ecosistemas.",
                dataPoints: [48, 36, 24, 18, 12]
            },
            {
                id: 23, eje: 7, name: "Reducci√≥n desperdicios agropec.",
                baseline: "0%", result: "25%", type: "bar",
                formula: "(Volumen p√©rdidas l√≠nea base - Volumen actual) / Volumen l√≠nea base",
                elements: "Cadenas productivas priorizadas (ej. hortalizas, frutas).",
                method: "Estudios de cadenas de valor.",
                justification: "Mejorar la eficiencia post-cosecha aumenta los ingresos rurales y reduce la presi√≥n por expandir la frontera agr√≠cola.",
                dataPoints: [0, 5, 12, 18, 25]
            },
            {
                id: 24, eje: 7, name: "Impacto ambiental miner√≠a verde",
                baseline: "100 (Ind)", result: "70 (Ind)", type: "line",
                formula: "√çndice compuesto de uso de agua y mercurio en proyectos financiados",
                elements: "Consumo h√≠drico, vertidos, uso de reactivos.",
                method: "Auditor√≠as ambientales anuales.",
                justification: "Busca desacoplar la producci√≥n minera de la destrucci√≥n ambiental mediante tecnolog√≠as limpias.",
                dataPoints: [100, 90, 85, 78, 70]
            },
            {
                id: 25, eje: 7, name: "Manejo forestal sostenible",
                baseline: "8M ha", result: "12M ha", type: "line",
                formula: "Superficie bajo planes de manejo, certificaci√≥n o gesti√≥n comunitaria",
                elements: "Bosques TCO, Concesiones, √Åreas Protegidas.",
                method: "Registro forestal nacional.",
                justification: "Pone en valor el bosque en pie, generando econom√≠a local compatible con la conservaci√≥n de la biodiversidad.",
                dataPoints: [8, 9, 10, 11, 12]
            }
        ];

        // --- Core Logic ---

        let activeAxisId = 1;
        let chartInstance = null;

        const containerNav = document.getElementById('axis-nav-container');
        const containerGrid = document.getElementById('indicators-grid');
        const containerHeader = document.getElementById('section-header');
        
        // Modal Elements
        const modal = document.getElementById('detail-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalAxisBadge = document.getElementById('modal-axis-badge');
        const modalJustification = document.getElementById('modal-justification');
        const modalFormula = document.getElementById('modal-formula');
        const modalElements = document.getElementById('modal-elements');
        const modalMethod = document.getElementById('modal-calc-method');
        const modalBaseline = document.getElementById('modal-baseline');
        const modalResult = document.getElementById('modal-result');

        function init() {
            renderNav();
            renderSection(activeAxisId);
        }

        function renderNav() {
            containerNav.innerHTML = '';
            Object.keys(axesData).forEach(key => {
                const axis = axesData[key];
                const btn = document.createElement('button');
                const isActive = parseInt(key) === activeAxisId;
                
                btn.className = `w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 flex items-center gap-3 ${
                    isActive 
                    ? 'bg-teal-600 text-white shadow-md' 
                    : 'text-slate-600 hover:bg-slate-200 hover:text-slate-900'
                }`;
                
                // Simple Unicode icons based on Axis ID
                const icons = {1: 'üìà', 2: 'üåç', 3: '‚öñÔ∏è', 4: 'üíª', 5: 'üîç', 6: 'üè•', 7: 'üåø'};

                btn.innerHTML = `<span class="text-lg">${icons[key]}</span> <span>${axis.name}</span>`;
                btn.onclick = () => {
                    activeAxisId = parseInt(key);
                    renderNav();
                    renderSection(activeAxisId);
                };
                containerNav.appendChild(btn);
            });
        }

        function renderSection(axisId) {
            const axis = axesData[axisId];
            
            // Render Header
            containerHeader.innerHTML = `
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">${axis.name}</h2>
                    <p class="text-slate-600 leading-relaxed">${axis.desc}</p>
                </div>
            `;

            // Filter Indicators
            const filteredIndicators = indicatorsData.filter(i => i.eje === axisId);
            
            // Render Grid
            containerGrid.innerHTML = '';
            filteredIndicators.forEach(ind => {
                const card = document.createElement('div');
                card.className = "bg-white p-6 rounded-xl shadow-sm hover:shadow-lg transition-shadow border border-slate-100 cursor-pointer group flex flex-col justify-between h-full";
                
                // Determine trend icon color (simplified logic)
                const isPositive = true; // Assuming all targets are improvements
                
                card.innerHTML = `
                    <div>
                        <div class="flex justify-between items-start mb-4">
                            <span class="inline-block px-2 py-1 rounded text-xs font-semibold bg-slate-100 text-slate-500">ID ${ind.id}</span>
                            <span class="text-teal-500 group-hover:translate-x-1 transition-transform">‚ûî</span>
                        </div>
                        <h3 class="font-bold text-slate-800 text-lg mb-2 group-hover:text-teal-700 transition-colors">${ind.name}</h3>
                        <p class="text-sm text-slate-500 line-clamp-2">${ind.justification}</p>
                    </div>
                    <div class="mt-6 pt-4 border-t border-slate-100 flex justify-between items-end">
                        <div>
                            <span class="block text-xs text-slate-400 uppercase">Actual</span>
                            <span class="text-xl font-bold text-slate-900">${ind.result}</span>
                        </div>
                         <div class="text-right">
                            <span class="block text-xs text-slate-400 uppercase">Meta</span>
                            <span class="text-sm font-semibold text-teal-600">En progreso</span>
                        </div>
                    </div>
                `;
                
                card.onclick = () => openModal(ind);
                containerGrid.appendChild(card);
            });
        }

        function openModal(indicator) {
            // Populate Text
            modalTitle.textContent = indicator.name;
            modalAxisBadge.textContent = `Eje ${indicator.eje}: ${axesData[indicator.eje].name}`;
            modalJustification.textContent = indicator.justification;
            modalFormula.textContent = indicator.formula;
            modalElements.textContent = indicator.elements;
            modalMethod.textContent = indicator.method;
            modalBaseline.textContent = indicator.baseline;
            modalResult.textContent = indicator.result;

            // Show Modal
            modal.classList.remove('hidden');

            // Render Chart
            renderChart(indicator);
        }

        function renderChart(indicator) {
            const ctx = document.getElementById('detailChart').getContext('2d');
            
            if (chartInstance) {
                chartInstance.destroy();
            }

            // Create labels (Years - hypothetical)
            const labels = ['2021', '2022', '2023', '2024', '2025'];
            
            // Config based on type
            const isBar = indicator.type === 'bar';
            const bgColor = isBar ? 'rgba(13, 148, 136, 0.6)' : 'rgba(13, 148, 136, 0.1)';
            const borderColor = 'rgba(13, 148, 136, 1)';

            chartInstance = new Chart(ctx, {
                type: indicator.type === 'pie' ? 'doughnut' : (isBar ? 'bar' : 'line'),
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Evoluci√≥n del Indicador',
                        data: indicator.dataPoints,
                        backgroundColor: bgColor,
                        borderColor: borderColor,
                        borderWidth: 2,
                        fill: !isBar,
                        tension: 0.3,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: borderColor,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(15, 23, 42, 0.9)',
                            padding: 12,
                            titleFont: { size: 13 },
                            bodyFont: { size: 13 },
                            displayColors: false,
                            callbacks: {
                                label: function(context) {
                                    return `Valor: ${context.raw}`;
                                }
                            }
                        }
                    },
                    scales: indicator.type === 'pie' ? {} : {
                        y: {
                            beginAtZero: false,
                            grid: { color: '#f1f5f9' },
                            ticks: { font: { size: 11 } }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { font: { size: 11 } }
                        }
                    }
                }
            });
        }

        // Event Listeners
        closeModalBtn.onclick = () => {
            modal.classList.add('hidden');
        };

        // Close on backdrop click
        modal.onclick = (e) => {
            if (e.target === modal) {
                modal.classList.add('hidden');
            }
        };

        // Initialize App
        init();

    </script>
</body>
</html>
